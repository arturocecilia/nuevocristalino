(function(a){a.widget("bf.symlens",{_options:{loadingImage:"../wp-content/themes/iol/images/newAjaxLoader.gif",easeOut:"easeInExpo",easeIn:"easeOutExpo",duration:13000,images:[]},_imageCount:0,_imagesLoaded:0,_currentImage:0,_images:{},_$images:{},_$canvas:null,_timerHandle:null,_create:function(){var b=this,d,f,c,e;a.extend(true,this._options,this.options);if(b._options.width!=undefined&&b._options.width>0){b.element.css("width",b._options.width)}b.element.prepend(a("<div/>",{id:"symlens-canvas"}).css("width",b._options.width).css("height",b._options.height));b._showLoading();b.ready(function(){for(f in b._images){e=a(b._images[f]);e.css("opacity","0");e.css("position","absolute");e.css("top","0");e.css("left","0");if(b._options.width!=undefined&&b._options.width>0){e.css("width",b._options.width)}if(b._options.height!=undefined&&b._options.height>0){e.css("height",b._options.height)}b._$images[f]=e;a("#symlens-canvas",b.element).append(e)}b._currentImage=b._getDefault();b.drawImage(b._getDefault());setTimeout(function(){b._hideLoading(1000)},1)});b._imageCount=b._options.images.length;b._images={};for(d=0;d<b._imageCount;d++){c=b._options.images[d][0];b._images[c]=new Image();b._images[c].onload=function(){b._imageLoaded()};b._images[c].src=b._options.images[d][1]}},_getLoadingModal:function(){var b=this,c;if(a("#symlens-loading",b.element).length==0){c=a("<div/>",{id:"symlens-loading"}).css("background-image","url('"+this._options.loadingImage+"')").css("background-repeat","no-repeat").css("background-position","center").css("position","absolute").css("top","0").css("left","0").css("background-color","#FFF").css("opacity","0.5").css("z-index","999").css("width","100%").css("height","100%");b.element.prepend(c)}else{c=a("#symlens-loading",b.element)}return c},_showLoading:function(){var b=this;b._getLoadingModal().show()},_hideLoading:function(b){var c=this;c._getLoadingModal().fadeOut(b)},_getDefault:function(){var b=this,c;for(c in b._$images){break}return c},drawImage:function(c){var b=this;b._reset();if(b._currentImage!=c){b._$images[b._currentImage].fadeTo(b._options.duration,0,b._options.easeOut);b._$images[c].fadeTo(b._options.duration,1,b._options.easeIn);b._currentImage=c}},_reset:function(){var b=this,c;for(c in b._$images){b._$images[c].stop();if(b._currentImage==c){b._$images[c].css("opacity","1")}else{b._$images[c].css("opacity","0")}}},_imageLoaded:function(){var b=this;if(++b._imagesLoaded>=b._imageCount){b._trigger("ready")}},ready:function(c){var b=this;if(c==undefined&&b._imagesLoaded>=b._imageCount){c.apply(b,[])}else{b.element.bind("symlensready",c)}},destroy:function(){a.Widget.prototype.destroy.apply(this,arguments)}})})(jQuery);